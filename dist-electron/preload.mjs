"use strict";const r=require("electron");console.log("ğŸ”¥ PRELOAD LOADED!");r.contextBridge.exposeInMainWorld("electronAPI",{storeTokens:e=>r.ipcRenderer.send("auth:storeTokens",e),clearTokens:()=>r.ipcRenderer.send("auth:clearTokens"),getTokens:async()=>{try{return await r.ipcRenderer.invoke("auth:getTokens")}catch(e){return console.error("getTokens error:",e),null}},saveUser:async e=>{try{return await r.ipcRenderer.invoke("db:saveUser",e)}catch(n){console.error("saveUser error:",n)}},getUser:async()=>{try{return await r.ipcRenderer.invoke("db:getUser")}catch(e){return console.error("getUser error:",e),null}},getNetworkStatus:async()=>{try{return await r.ipcRenderer.invoke("network:getStatus")}catch(e){return console.error("getNetworkStatus error:",e),{online:!0}}},setNetworkStatus:e=>r.ipcRenderer.send("network:setOnline",e),onNetworkStatus:e=>{const n=(s,t)=>e(t);return r.ipcRenderer.on("network:status",n),()=>r.ipcRenderer.removeListener("network:status",n)},cacheGet:async e=>r.ipcRenderer.invoke("cache:get",e),cachePut:async(e,n)=>r.ipcRenderer.invoke("cache:put",e,n),queueAdd:async e=>r.ipcRenderer.invoke("queue:add",e),queueList:async()=>r.ipcRenderer.invoke("queue:list"),queueClear:async()=>r.ipcRenderer.invoke("queue:clear"),queueSet:async e=>r.ipcRenderer.invoke("queue:set",e),getPeers:async()=>r.ipcRenderer.invoke("p2p:getPeers"),onPeers:e=>{const n=(s,t)=>e(t);return r.ipcRenderer.on("p2p:peers",n),()=>r.ipcRenderer.removeListener("p2p:peers",n)},broadcast:e=>r.ipcRenderer.send("p2p:broadcast",e),sendToPeer:(e,n)=>r.ipcRenderer.send("p2p:sendToPeer",e,n),onP2PMessage:e=>{const n=(s,t)=>e(t);return r.ipcRenderer.on("p2p:message",n),()=>r.ipcRenderer.removeListener("p2p:message",n)},checkForUpdates:()=>r.ipcRenderer.send("updater:check"),quitAndInstall:()=>r.ipcRenderer.send("updater:quitAndInstall"),onUpdateAvailable:e=>{const n=(s,t)=>e(t);return r.ipcRenderer.on("updater:update-available",n),()=>r.ipcRenderer.removeListener("updater:update-available",n)},onUpdateDownloaded:e=>{const n=(s,t)=>e(t);return r.ipcRenderer.on("updater:update-downloaded",n),()=>r.ipcRenderer.removeListener("updater:update-downloaded",n)},onUpdateStatus:e=>{const n=(s,t)=>e(t);return r.ipcRenderer.on("updater:status",n),()=>r.ipcRenderer.removeListener("updater:status",n)}});
